webpackJsonp([1],{1074:function(e,t){function n(e){return!!e&&"object"==typeof e}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function r(e){return a(e)&&f.call(e)==l}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return null!=e&&(r(e)?p.test(c.call(e)):n(e)&&s.test(e))}var l="[object Function]",s=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,f=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=function(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}(Array,"isArray"),h=9007199254740991,g=m||function(e){return n(e)&&o(e.length)&&"[object Array]"==f.call(e)};e.exports=g},1188:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t,n){for(var o=!0;o;){var r=e,a=t,i=n;o=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=i,o=!0,l=u=void 0}},l=n(409),s=n(1191),u=function(e){function t(e,n){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.prefixHeightData=this.heightData.reduce(function(e,t){return 0===e.length?[t]:(e.push(e[e.length-1]+t),e)},[])}return r(t,e),a(t,[{key:"maybeIndexToIndex",value:function(e){return void 0===e||null===e?this.prefixHeightData.length-1:e}},{key:"getTotalScrollableHeight",value:function(){var e=this.prefixHeightData.length;return 0===e?0:this.prefixHeightData[e-1]}},{key:"getDisplayIndexStart",value:function(e){var t=s.binaryIndexSearch(this.prefixHeightData,e,s.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getDisplayIndexEnd",value:function(e){var t=s.binaryIndexSearch(this.prefixHeightData,e,s.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getTopSpacerHeight",value:function(e){var t=e-1;return t<0?0:this.prefixHeightData[t]}},{key:"getBottomSpacerHeight",value:function(e){return-1===e?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}]),t}(l);e.exports=u},1189:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t,n){for(var o=!0;o;){var r=e,a=t,i=n;o=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=i,o=!0,l=u=void 0}},l=n(409),s=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"getTotalScrollableHeight",value:function(){return this.heightData*this.numberOfChildren}},{key:"getDisplayIndexStart",value:function(e){return Math.floor(e/this.heightData)}},{key:"getDisplayIndexEnd",value:function(e){var t=Math.ceil(e/this.heightData);return t>0?t-1:t}},{key:"getTopSpacerHeight",value:function(e){return e*this.heightData}},{key:"getBottomSpacerHeight",value:function(e){var t=e+1;return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}]),t}(l);e.exports=s},1190:function(e,t,n){"use strict";(function(t){function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var r=t.React||n(4),a=t.PropTypes||n(5),i=t.createReactClass||n(39),l=n(1197);n(1193);var s=n(1195),u=n(1194),c=n(394),d=n(1196).preloadType,f=f=n(1192),p=i({propTypes:{children:a.any,handleScroll:a.func,preloadBatchSize:d,preloadAdditionalHeight:d,elementHeight:a.oneOfType([a.number,a.arrayOf(a.number)]).isRequired,containerHeight:a.number,useWindowAsScrollContainer:a.bool,displayBottomUpwards:a.bool.isRequired,infiniteLoadBeginEdgeOffset:a.number,onInfiniteLoad:a.func,loadingSpinnerDelegate:a.node,isInfiniteLoading:a.bool,timeScrollStateLastsForAfterUserScrolls:a.number,className:a.string,styles:a.shape({scrollableStyle:a.object}).isRequired},statics:{containerHeightScaleFactor:function(e){if(!c(e))throw new Error("The scale factor must be a number.");return{type:s.CONTAINER_HEIGHT_SCALE_FACTOR,amount:e}}},computedProps:{},utils:{},shouldAttachToBottom:!1,preservedScrollState:0,loadingSpinnerHeight:0,deprecationWarned:!1,scrollable:null,topSpacer:null,bottomSpacer:null,smoothScrollingWrapper:null,loadingSpinner:null,getDefaultProps:function(){return{handleScroll:function(){},useWindowAsScrollContainer:!1,onInfiniteLoad:function(){},loadingSpinnerDelegate:r.createElement("div",null),displayBottomUpwards:!1,isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150,className:"",styles:{}}},getInitialState:function(){var e=this.recomputeInternalStateFromProps(this.props);this.computedProps=e.computedProps,this.utils=e.utils,this.shouldAttachToBottom=this.props.displayBottomUpwards;var t=e.newState;return t.scrollTimeout=void 0,t.isScrolling=!1,t},generateComputedProps:function(e){var t=e.containerHeight,n=e.preloadBatchSize,r=e.preloadAdditionalHeight,a=o(e,["containerHeight","preloadBatchSize","preloadAdditionalHeight"]),i={};t="number"==typeof t?t:0,i.containerHeight=e.useWindowAsScrollContainer?l.innerHeight:t,void 0!==a.infiniteLoadBeginBottomOffset&&(i.infiniteLoadBeginEdgeOffset=a.infiniteLoadBeginBottomOffset,this.deprecationWarned||(this.deprecationWarned=!0));var u={type:s.CONTAINER_HEIGHT_SCALE_FACTOR,amount:.5},c=n&&n.type?n:u;"number"==typeof n?i.preloadBatchSize=n:"object"==typeof c&&c.type===s.CONTAINER_HEIGHT_SCALE_FACTOR?i.preloadBatchSize=i.containerHeight*c.amount:i.preloadBatchSize=0;var d={type:s.CONTAINER_HEIGHT_SCALE_FACTOR,amount:1},f=r&&r.type?r:d;return"number"==typeof r?i.preloadAdditionalHeight=r:"object"==typeof f&&f.type===s.CONTAINER_HEIGHT_SCALE_FACTOR?i.preloadAdditionalHeight=i.containerHeight*f.amount:i.preloadAdditionalHeight=0,Object.assign(a,i)},generateComputedUtilityFunctions:function(e){var t=this,n={};return n.getLoadingSpinnerHeight=function(){var e=0;return t.loadingSpinner&&(e=t.loadingSpinner.offsetHeight||0),e},e.useWindowAsScrollContainer?(n.subscribeToScrollListener=function(){l.addEventListener("scroll",t.infiniteHandleScroll)},n.unsubscribeFromScrollListener=function(){l.removeEventListener("scroll",t.infiniteHandleScroll)},n.nodeScrollListener=function(){},n.getScrollTop=function(){return l.pageYOffset},n.setScrollTop=function(e){l.scroll(l.pageXOffset,e)},n.scrollShouldBeIgnored=function(){return!1},n.buildScrollableStyle=function(){return{}}):(n.subscribeToScrollListener=function(){},n.unsubscribeFromScrollListener=function(){},n.nodeScrollListener=this.infiniteHandleScroll,n.getScrollTop=function(){return t.scrollable?t.scrollable.scrollTop:0},n.setScrollTop=function(e){t.scrollable&&(t.scrollable.scrollTop=e)},n.scrollShouldBeIgnored=function(e){return e.target!==t.scrollable},n.buildScrollableStyle=function(){return Object.assign({},{height:t.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll",WebkitOverflowScrolling:"touch"},t.computedProps.styles.scrollableStyle||{})}),n},recomputeInternalStateFromProps:function(e){f(e);var t=this.generateComputedProps(e),n=this.generateComputedUtilityFunctions(e),o={};return o.numberOfChildren=r.Children.count(t.children),o.infiniteComputer=u.createInfiniteComputer(t.elementHeight,t.children),void 0!==t.isInfiniteLoading&&(o.isInfiniteLoading=t.isInfiniteLoading),o.preloadBatchSize=t.preloadBatchSize,o.preloadAdditionalHeight=t.preloadAdditionalHeight,o=Object.assign(o,u.recomputeApertureStateFromOptionsAndScrollTop(o,n.getScrollTop())),{computedProps:t,utils:n,newState:o}},componentWillReceiveProps:function(e){var t=this.recomputeInternalStateFromProps(e);this.computedProps=t.computedProps,this.utils=t.utils,this.setState(t.newState)},componentWillUpdate:function(){this.props.displayBottomUpwards&&(this.preservedScrollState=this.utils.getScrollTop()-this.loadingSpinnerHeight)},componentDidUpdate:function(e,t){if(this.loadingSpinnerHeight=this.utils.getLoadingSpinnerHeight(),this.props.displayBottomUpwards){var n=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<n?this.utils.setScrollTop(n):e.isInfiniteLoading&&!this.props.isInfiniteLoading&&this.utils.setScrollTop(this.state.infiniteComputer.getTotalScrollableHeight()-t.infiniteComputer.getTotalScrollableHeight()+this.preservedScrollState)}var o=this.state.numberOfChildren!==t.numberOfChildren;if(o){var r=u.recomputeApertureStateFromOptionsAndScrollTop(this.state,this.utils.getScrollTop());this.setState(r)}o&&!this.hasAllVisibleItems()&&!this.state.isInfiniteLoading&&this.onInfiniteLoad()},componentDidMount:function(){if(this.utils.subscribeToScrollListener(),this.hasAllVisibleItems()||this.onInfiniteLoad(),this.props.displayBottomUpwards){var e=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<e&&this.utils.setScrollTop(e)}},componentWillUnmount:function(){this.utils.unsubscribeFromScrollListener()},infiniteHandleScroll:function(e){this.utils.scrollShouldBeIgnored(e)||(this.computedProps.handleScroll(this.scrollable),this.handleScroll(this.utils.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var e=this,t=setTimeout(function(){e.setState({isScrolling:!1,scrollTimeout:void 0})},this.computedProps.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:t})},getLowestPossibleScrollTop:function(){return this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight},hasAllVisibleItems:function(){return!(c(this.computedProps.infiniteLoadBeginEdgeOffset)&&this.state.infiniteComputer.getTotalScrollableHeight()<this.computedProps.containerHeight)},passedEdgeForInfiniteScroll:function(e){return this.computedProps.displayBottomUpwards?!this.shouldAttachToBottom&&e<this.computedProps.infiniteLoadBeginEdgeOffset:e>this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight-this.computedProps.infiniteLoadBeginEdgeOffset},onInfiniteLoad:function(){this.setState({isInfiniteLoading:!0}),this.computedProps.onInfiniteLoad()},handleScroll:function(e){this.shouldAttachToBottom=this.computedProps.displayBottomUpwards&&e>=this.getLowestPossibleScrollTop(),this.manageScrollTimeouts();var t=u.recomputeApertureStateFromOptionsAndScrollTop(this.state,e);this.passedEdgeForInfiniteScroll(e)&&!this.state.isInfiniteLoading?(this.setState(Object.assign({},t)),this.onInfiniteLoad()):this.setState(t)},buildHeightStyle:function(e){return{width:"100%",height:Math.ceil(e)}},render:function(){var e,t=this;e=this.state.numberOfChildren>1?this.computedProps.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1):this.computedProps.children;var n={};this.state.isScrolling&&(n.pointerEvents="none");var o=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),a=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);if(this.computedProps.displayBottomUpwards){var i=this.computedProps.containerHeight-this.state.infiniteComputer.getTotalScrollableHeight();i>0&&(o=i-this.loadingSpinnerHeight)}var l=void 0===this.computedProps.infiniteLoadBeginEdgeOffset?null:r.createElement("div",{ref:function(e){t.loadingSpinner=e}},this.state.isInfiniteLoading?this.computedProps.loadingSpinnerDelegate:null);return r.createElement("div",{className:this.computedProps.className,ref:function(e){t.scrollable=e},style:this.utils.buildScrollableStyle(),onScroll:this.utils.nodeScrollListener},r.createElement("div",{ref:function(e){t.smoothScrollingWrapper=e},style:n},r.createElement("div",{ref:function(e){t.topSpacer=e},style:this.buildHeightStyle(o)}),this.computedProps.displayBottomUpwards&&l,e,!this.computedProps.displayBottomUpwards&&l,r.createElement("div",{ref:function(e){t.bottomSpacer=e},style:this.buildHeightStyle(a)})))}});e.exports=p,t.Infinite=p}).call(t,n(40))},1191:function(e,t,n){"use strict";var o={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},r=function(e,t,n){for(var r,a,i,l=e.length-1,s=0;s<=l;){if(a=s+Math.floor((l-s)/2),(i=e[a])===t)return a;i<t?s=a+1:i>t&&(l=a-1)}return n===o.CLOSEST_LOWER&&s>0?r=s-1:n===o.CLOSEST_HIGHER&&l<e.length-1&&(r=l+1),r};e.exports={binaryIndexSearch:r,opts:o}},1192:function(e,t,n){"use strict";(function(t){var o=t.React||n(4),r=n(394);e.exports=function(e){var t="Invariant Violation: ";if(!e.containerHeight&&!e.useWindowAsScrollContainer)throw new Error(t+"Either containerHeight or useWindowAsScrollContainer must be provided.");if(!r(e.elementHeight)&&!Array.isArray(e.elementHeight))throw new Error(t+"You must provide either a number or an array of numbers as the elementHeight.");if(Array.isArray(e.elementHeight)&&o.Children.count(e.children)!==e.elementHeight.length)throw new Error(t+"There must be as many values provided in the elementHeight prop as there are children.")}}).call(t,n(40))},1193:function(e,t,n){"use strict";Object.assign||(Object.assign=n(94)),Array.isArray||(Array.isArray=n(1074))},1194:function(e,t,n){"use strict";(function(t){function o(e,t){var n=l.Children.count(t);return Array.isArray(e)?new i(e,n):new a(e,n)}function r(e,t){var n=e.preloadBatchSize,o=e.preloadAdditionalHeight,r=e.infiniteComputer;return function(){var e=0===n?0:Math.floor(t/n),a=n*e,i=a+n,l=Math.max(0,a-o),s=Math.min(r.getTotalScrollableHeight(),i+o);return{displayIndexStart:r.getDisplayIndexStart(l),displayIndexEnd:r.getDisplayIndexEnd(s)}}()}var a=n(1189),i=n(1188),l=t.React||n(4);e.exports={createInfiniteComputer:o,recomputeApertureStateFromOptionsAndScrollTop:r}}).call(t,n(40))},1195:function(e,t,n){"use strict";e.exports={CONTAINER_HEIGHT_SCALE_FACTOR:"containerHeightScaleFactor"}},1196:function(e,t,n){"use strict";(function(t){var o=t.PropTypes||n(5);e.exports={preloadType:o.oneOfType([o.number,o.shape({type:o.oneOf(["containerHeightScaleFactor"]).isRequired,amount:o.number.isRequired})])}}).call(t,n(40))},1197:function(e,t,n){"use strict";(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(40))},1258:function(e,t,n){n(114),e.exports=n(439)},185:function(e,t,n){!function(t,n){e.exports=n()}(window,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function o(){return r}Object.defineProperty(t,"__esModule",{value:!0}),t.judgeClientVersion=o;var r={isOldWin:!1,isNewWin:!1,isMac:!1,isWeb:!1};window.external?window.external.nativeCall?r.isNewWin=!0:window.external.EduOpenClass&&(r.isOldWin=!0):window.navigator.userAgent.indexOf("EduMac")>=0?r.isMac=!0:r.isWeb=!0,t.default={judgeClientVersion:o}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.judgeClientVersion=void 0;var r=n(0);Object.defineProperty(t,"judgeClientVersion",{enumerable:!0,get:function(){return r.judgeClientVersion}}),t.openUrl=function(e,t){if(e&&""!==e&&0!==e.indexOf("javascript")){if(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=window.location.origin+e),u)return window.open(e),void("function"==typeof t&&t());(0,i.default)("CallHummerApi",{functionName:"IM.GetClientKey"}).then(function(n){s&&(n=n.clientKey);var o=a.default.uin();if(!/ke.qq.com/.test(e))return window.open(e),void("function"==typeof t&&t());n&&window.open("https://ke.qq.com/teacher-client/clearCookieProxy.html?clientUin="+o+"&clientKey="+n+"&url="+encodeURIComponent(e)),"function"==typeof t&&t()})}};var a=o(n(2)),i=o(n(4)),l=(0,r.judgeClientVersion)(),s=l.isMac,u=l.isWeb;t.default=i.default},function(e,t,n){e.exports=n(3)},function(e,t){t={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t?decodeURIComponent(t[2]):""},set:function(e,t,n,o,r){var a=new Date;a.setTime(a.getTime()+(r?36e5*r:2592e6)),document.cookie=e+"="+t+"; expires="+a.toGMTString()+"; path="+(o||"/")+"; "+(n?"domain="+n+";":"")},setSession:function(e,t,n,o){document.cookie=e+"="+t+"; path="+(o||"/")+"; "+(n?"domain="+n+";":"")},del:function(e,t,n){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(n||"/")+"; "+(t?"domain="+t+";":"")},clear:function(){var e=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi"));for(var t in e)document.cookie=e[t]+"=;expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/; "},uin:function(){var e;return 2==this.get("uid_type")?this.get("uid_uin")||null:e=(e=(e=this.get("p_uin")||this.get("uin")||this.get("pt2gguin")||this.get("adid"))?parseInt(e.substring(1,e.length),10):null)||parseInt(this.get("uin_cookie"),10)||null}},e.exports=t},function(e,t,n){"use strict";function o(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="temp_callback_"+Date.now()+Math.ceil(100*Math.random()),o=function(){e.apply(void 0,arguments),t&&(window[n]&&delete window[n],d[n]&&delete d[n])};return window.external&&window.external.nativeCallEx?d[n]=o:window[n]=o,n}function a(e,t){var n=[],o=u.default[e].params,r=Object.assign({},t);Object.keys(r).forEach(function(e){o.forEach(function(t){if(e===t.name){var o=r[e];t.format&&(o=t.format(o)),t.isOldPCParam&&(n.push(o),delete r[e])}})});var a=JSON.stringify(r);return n&&n.length?"{}"===a?[].concat(n):[a].concat(n):"{}"===a?[]:[a]}function i(e){return"string"==typeof e&&(e.match(/^{\S*}$/g)||"").length?JSON.parse(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.IS_API_EXIST=void 0,t.macBridge=o,t.generateGlobal=r,t.default=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(l,s){var d=u.default[e],f=d.autoDestroyCallback,p=void 0===f||f,m=d.callback;if(n=function(e){var t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t}(n),function(e,t){u.default[e].params.forEach(function(e){var n=e.name;e.isRequired&&void 0===t[n]&&(t[n]=void 0===e.defaultVal?"":e.defaultVal)})}(e,n),c)o(function(t){var o=void 0,s=a(e,n);m&&(o=r(function(e){l(i(e))},p),s.push(o)),t.callHandler(e,s,function(e){o||(e=i(e),l(e))}),m&&t.registerHandler(o,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];l(i(e[0]))});var u=n.callback;u&&t.registerHandler(u,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];window[u]&&window[u](i(e[0])),l(i(e[0]))})});else if(window.external)if(window.external.nativeCallEx)try{m&&(n.callback=r(function(e){l(i(e))},!1)),window.external.nativeCallEx(e,[JSON.stringify(n)],function(e){m||(0===(e=JSON.parse(e)).retcode?l(i(e.result)):s(e))})}catch(e){s(e)}else if(window.external[e]){var h=a(e,n);m&&h.push(r(function(e){l(e)}));var g=window.external[e].apply(t,h);m||(g=i(g),l(g))}else s({errType:998,errMsg:"api 不存在"});else s({errType:999,errMsg:"window.external 不存在"})})};var l,s=n(5),u=(l=s)&&l.__esModule?l:{default:l};t.IS_API_EXIST="isApiExist";var c=window.navigator.userAgent.indexOf("EduMac")>=0,d={};window.execGlobalCallback=function(e){var t=e.funcname,n=e.params,o=d[t]||window[t];o&&o.apply(this,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(0,n(0).judgeClientVersion)().isMac;t.default={EduShowWebPage:{descript:"打开客户端窗口，加载一个页面",params:[{name:"id",type:"string",info:"",defaultVal:"233",isRequired:!0},{name:"url",type:"string",info:"",defaultVal:"https://ke.qq.com/clientcourse/courseDialog.html?tid=100482207",isRequired:!0},{name:"width",type:"number",info:"",defaultVal:500,isRequired:!0},{name:"height",type:"number",info:"",defaultVal:500,isRequired:!0},{name:"title",type:"string",info:"",defaultVal:" ",isRequired:!0},{name:"titleBarColor",type:"string",info:"",defaultVal:"#04acf7"},{name:"backgroundColor",type:"string",info:"背景颜色",defaultVal:"#333"},{name:"titleColor",type:"string",info:""},{name:"linkTitleUrl",type:"string",info:""},{name:"top",type:"number",info:"",defaultVal:0,isRequired:!0},{name:"left",type:"number",info:"",defaultVal:0,isRequired:!0},{name:"miniWidth",type:"number",info:""},{name:"miniHeight",type:"number",info:""},{name:"linkTitle",type:"bool",info:""},{name:"centerParent",type:"bool",info:""},{name:"noParent",type:"bool",info:""},{name:"fixPosition",type:"bool",info:""},{name:"hideIfLoseFocus",type:"bool",info:""},{name:"topmost",type:"bool",info:""},{name:"centerTitle",type:"bool",info:""},{name:"hideTitleBar",type:"bool",info:""},{name:"highTitle",type:"bool",info:""},{name:"showMaxBtn",type:"bool",info:""},{name:"showMinBtn",type:"bool",info:""},{name:"showCloseBtn",type:"bool",info:""},{name:"hidden",type:"bool",info:""},{name:"showIcon",type:"bool",info:""},{name:"showRefreshBtn",type:"bool",info:""},{name:"sizeChangeable",type:"bool",info:""},{name:"enableJsDialog",type:"bool",info:""},{name:"isRealWindow",type:"bool",info:""}]},EduOpenClass:{descript:"打开直播窗口",params:[{name:"termid",type:"number",info:"",defaultVal:100131688,isRequired:!0},{name:"cid",type:"number",info:"",defaultVal:120025,isRequired:!0},{name:"csid",type:"number",info:""},{name:"subtermid",type:"number",info:""},{name:"title",type:"string",info:"",defaultVal:" ",isRequired:!0},{name:"class_begin_time",type:"number",info:"",defaultVal:"233",isRequired:!0},{name:"class_end_time",type:"number",info:"",defaultVal:"233",isRequired:!0},{name:"class_room_mode",type:"number",info:"0表示学生，其他表示老师",defaultVal:0,isOldPCParam:!0}]},cutScreen:{descript:"截图（举报页）",params:[]},EduGetClientData:{descript:"获取客户端相关信息",params:[]},CaptureScreen:{descript:"截图（只能用于聊天区页面）",callback:!0,params:[]},EduShowContextMenu:{descript:"右键菜单",callback:!0,params:[{name:"commands",type:"array",info:"",defaultVal:[{id:0,text:"选项1",checkable:1,checked:1},{id:1,text:"选项2",checkable:1}],isRequired:!0}]},EduHideWebPage:{descript:"关闭客户端窗口",params:[{name:"id",type:"number",info:""}]},EduShowToast:{descript:"展示toast提示语",params:[{name:"text",type:"string",info:"",isOldPCParam:!0}]},CallHummerApi:{descript:"调用客户端api",params:[{name:"functionName",type:"string",info:"当functionName是IM.GetClientKey、IM.UpdateSkey、IM.GetSKey、Contact.GetSelfUin、Contact.GetNickName、Window.Close、Window.Destroy、IM.GetVersion",isOldPCParam:!0}]},ShowChatSetting:{descript:"展示聊天设置",callback:!0,params:[]},closeInformBox:{descript:"关闭举报弹窗(只win有这个页面要用)",callback:!0,params:[]},closeFeedbackBox:{descript:"关闭反馈弹窗(只win有这个页面要用)",callback:!0,params:[]},EduPopupMemberContextMenuEx:{descript:"成员列表右键菜单",params:[{name:"uin",type:"string",info:"",isRequired:!0,defaultVal:"312405270",isOldPCParam:!0},{name:"role",type:"number",info:"role 身份 1 助教， 2 老师，3 机构外未付费学生，4 机构内未付费学生 5 机构外付费学生 6 机构内付费学生 7 管理员 8 校长 9班长",isRequired:!0,defaultVal:5,isOldPCParam:!0,format:function(e){return o?e.toString():e}},{name:"uinType",type:"number",info:"账号类型 0-QQ, 2-微信, 1001-游客",isRequired:!0,defaultVal:0,isOldPCParam:!0,format:function(e){return o?e.toString():e}},{name:"loginType",type:"number",info:"登录方式(0 - pc, 1 - android, 2 - ios)",isRequired:!0,defaultVal:0,isOldPCParam:!0},{name:"sex",type:"number",info:"性别 1 男 2 女",isRequired:!0,defaultVal:2,isOldPCParam:!0},{name:"label",type:"number",info:"",isRequired:!0,defaultVal:0,isOldPCParam:!0},{name:"nickname",type:"string",info:"",defaultVal:"nick",isOldPCParam:!0},{name:"remark",type:"string",info:"",defaultVal:"备注",isOldPCParam:!0},{name:"more_info",type:"string",info:"json字符串",defaultVal:3,isOldPCParam:!0}]},setLetterUrlAndShowWnd:{descript:"设置私信url并展示",params:[{name:"url",type:"string",info:"https://ke.qq.com/letter/index.html?env=client#/?agencyId=10085&receiverUin=312405270&isConsult=1",isRequired:!0,defaultVal:"https://ke.qq.com/letter/index.html?env=client#/?agencyId=10085&receiverUin=312405270&isConsult=1"},{name:"padding_right",type:"number",info:"",isRequired:!0,defaultVal:0},{name:"padding_left",type:"number",info:"",isRequired:!0,defaultVal:0}]},setLetterUrl:{descript:"设置私信url",params:[{name:"url",type:"string",info:"https://ke.qq.com/letter/index.html?env=client#/?agencyId=10085&receiverUin=312405270&isConsult=1",isRequired:!0,defaultVal:""},{name:"padding_right",type:"number",info:"",isRequired:!0,defaultVal:0},{name:"padding_left",type:"number",info:"",isRequired:!0,defaultVal:0}]},EduSetHostWindowTitle:{descript:"设置客户端窗口title",params:[{name:"title",type:"string",info:"title名称",isRequired:!0,defaultVal:" ",isOldPCParam:!0}]},EduSetWindowFullScreen:{descript:"设置客户端窗口是否全屏",params:[{name:"full",type:"number",info:"0非全屏；1全屏",isRequired:!0,defaultVal:1,isOldPCParam:!0}]},EduUpdateSKeyCookieEx:{descript:"更新skey",params:[{name:"urlForSkey",type:"string",info:"",isRequired:!0,defaultVal:"https://.ke.qq.com"},{name:"domainForSkey",type:"string",info:"",isRequired:!0,defaultVal:".ke.qq.com"},{name:"urlForOthers",type:"string",info:"",isRequired:!0,defaultVal:".ke.qq.com"},{name:"domainForOthers",type:"string",info:"",isRequired:!0,defaultVal:".ke.qq.com"},{name:"callback",type:"string",info:"",isRequired:!0},{name:"currentKeyInvalid",type:"string",info:"",isRequired:!0,defaultVal:"1"}]},EduRegisterClassStatusNotify:{descript:"课程状态",params:[{name:"callback",type:"string",info:"",isRequired:!0,isOldPCParam:!0}]},EduChangeWindowProperty:{descript:"设置窗口大小",params:[{name:"width",type:"number",info:"",isRequired:!0},{name:"height",type:"number",info:"",isRequired:!0}]}}}])})},305:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(103),a=o(r),i=n(102),l=o(i),s=n(1),u=o(s),c=n(3),d=o(c),f=n(2),p=o(f),m=n(4),h=o(m),g=n(5),y=o(g),v=n(70),b=o(v),S=n(6),_=o(S),E=n(51),w=n(19),C=n(41);n(884);var O=function(e){function t(n){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n));return o.state={},o.onSendAction=o.onSendAction.bind(o),o}return(0,p.default)(t,e),t.prototype.getLinkUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="//ke.qq.com/course/"+e;return 2===t&&(n="//ke.qq.com/course/package/"+e),n},t.prototype.componentDidMount=function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(a.default.mark(function e(){var t,n,o,r,i,l=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.id,o=t.data,r=t.scrollToBottom,i=t.type,!o){e.next=4;break}return setTimeout(function(){l.setState(o),r&&r()}),e.abrupt("return");case 4:(0,C.getRichInfo)({type:i||1,id:n}).then(function(e){var t=e.id,n=e.title,o=e.price,r=e.cover_url,a=e.type,i=l.getLinkUrl(t,a);l.setState({id:t,title:n,type:a,cover_url:r,price:o,url:i})});case 5:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.getRenderDom=function(){var e=this.props.small,t=this.state,n=t.id,o=t.type;if(!n||t.hide)return null;var r=this.getLinkUrl(n,o);return b.default.tdw({action:"exposure",obj1:"auto_course",obj2:(0,C.getReportPageString)()}),h.default.createElement("div",{className:"chat-item-course"},h.default.createElement("div",{className:(0,_.default)({course:!0,"course--small":e}),onClick:function(){e&&window.open(r)}},h.default.createElement("img",{className:"course-img",src:t.cover_url,alt:""}),h.default.createElement("div",{className:"course-right"},h.default.createElement("div",{className:"course-name"},(0,w.decode)(t.title)),h.default.createElement("p",{className:"course-info"},h.default.createElement("span",{className:"course-price"},(0,w.formatPriceV2)(t.price)),e?null:h.default.createElement(E.Button,{className:"course-send",onClick:this.onSendAction},"发送课程")))))},t.prototype.onSendAction=function(){var e=this.props.sendMessage,t={text:"course",contentList:[{insert:{course:this.state}}]};this.setState({hide:!0});var n=document.getElementsByClassName("msglist")[0];n&&n.classList.remove("msglist-small"),e(t),b.default.tdw({action:"click",obj1:"auto_course"})},t.prototype.render=function(){return this.getRenderDom()},t}(m.Component);O.propType={style:y.default.object,className:y.default.string,dispatch:y.default.func},t.default=O},306:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(103),l=o(i),s=n(102),u=o(s),c=n(1),d=o(c),f=n(3),p=o(f),m=n(2),h=o(m),g=n(4),y=o(g),v=n(5),b=o(v),S=n(70),_=o(S),E=n(20),w=n(6),C=o(w),O=n(523),T=o(O),I=n(524),N=o(I),P=n(305),x=o(P),M=n(198),R=o(M),k=n(190),L=o(k),H=n(191),A=o(H),j=n(42),B=n(43),D=n(19),U=n(41);n(885);var F=function(e){function t(n){(0,d.default)(this,t);var o=(0,p.default)(this,e.call(this,n));return o.isScrollInBottom=!0,o.isLoadingData=!0,o.msgOpts={},o.needScrollToBottom=function(){o.isScrollInBottom&&o.scrollToBottom()},o.renderMsgList=function(e){var t=o.props,n=t.chat.msgList,r=t.currentRoom.membersInfo,a=(0,U.appendTimeIntoMsgList)(n&&n.list),i=a.length;return o.state.isFetching?y.default.createElement("div",{className:"item-loading"}):y.default.createElement("div",{ref:function(e){o.list=e},className:(0,C.default)({msglist:!0,"msglist-small":e}),onScroll:o.onScroll},a.map(function(e,t){var n=e.strRemark,a=e.isTimeSep,l=e.time,s=e.bottom,u=e.from,c=t===i-1&&s;return a?y.default.createElement(N.default,{time:l,from:u}):y.default.createElement(T.default,{record:e,key:n,membersInfo:r,doRetry:function(){return o.doRetry(n)},scrollToBottom:o.needScrollToBottom,needToBottom:c})}))},o.doRetry=o.doRetry.bind(o),o.onScroll=o.onScroll.bind(o),o.scrollToBottom=o.scrollToBottom.bind(o),o.state={isFetching:!0},o}return(0,h.default)(t,e),t.prototype.componentWillReceiveProps=function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.newRoomId===this.props.newRoomId&&t.receiverUin===this.props.receiverUin||this.getHistoryMsg(t,!0);case 1:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.componentDidMount=function(){var e=(0,D.getHash)("isConsult");this.firstEnter(e),this.fetchData();var t=this.props.chat.msgList;0===(t&&t.list||[]).length&&e&&_.default.tdw({action:"start"}),_.default.tdw({action:"exposure",obj1:"msg_list"})},t.prototype.firstEnter=function(e){var t=A.default.get("CHAT_LOCAL_KEY"),n=this.props,o=n.currentRoom,r=o.membersInfo,a=o.roomId,i=n.dispatch,l=r&&r.me||{},s=void 0;try{s=JSON.parse(t)}catch(e){s={}}0!==l.role_type&&!e||s.user_first_enter||(i((0,j.sendNewMsg)((0,U.createSystemMsg)({room_id:a,value:B.FIRST_OPEN_ROOM_BY_USER}))),s.user_first_enter=1,A.default.set("CHAT_LOCAL_KEY",JSON.stringify(s))),1!==l.role_type||s.saler_first_enter||(i((0,j.sendNewMsg)((0,U.createSystemMsg)({room_id:a,value:B.FIRST_OPEN_ROOM_BY_SALER}))),s.saler_first_enter=1,A.default.set("CHAT_LOCAL_KEY",JSON.stringify(s)))},t.prototype.getHistoryMsg=function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(t,n){var o,r,a,i,s,u,c,d,f,p,m,h,g,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.dispatch,r=t.newRoomId,a=t.receiverUin,i=t.isCall,s=window,u=s.letterUserInfo,c=void 0,c=0===r?0:r||(0,D.getHash)("roomId")||0,d=(0,D.getHash)("agencyId")||(0,D.getAid)(),f=a||(0,D.getHash)("receiverUin")||0,this.msgOpts={room_id:c,page:y.page||1,num:10,time_slice:0,agency_id:d,uid_type:u.uid_type,receiver_uin:f},this.setState({isFetching:!0}),e.next=10,o((0,j.getHistoryMsg)(this.msgOpts,n));case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return p=e.t0,m=p.room,m&&(h=(0,U.diffMembers)(m.members,{roomName:m.room_name,roomAvator:m.room_logo}),h.me&&1===h.me.role_type&&m.msgs&&0===m.msgs.length&&m.last_mofiy_ts<=m.create_ts&&(g=(0,U.createSystemMsg)({room_id:c,value:B.SYSTEM_MSG_RETCODE_WORDING.newChat}),o((0,j.sendNewMsg)(g)))),-1!==p.retcode&&i&&0===r&&o((0,j.updateSessionList)({room_id:p.room&&p.room.room_id})),1===this.msgOpts.page&&(this.msgOpts.time_slice=p.time_slice),this.isLoadingData=!1,this.scrollToBottom(),-1!==p.retcode&&this.setState({isFetching:!1}),e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.fetchData=function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getHistoryMsg(this.props,!1,{page:this.getNextPage()});case 1:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.componentWillUnmount=function(){(0,this.props.dispatch)((0,j.setChatMsgList)({data:[],hasNext:!1}))},t.prototype.getNextPage=function(){var e=this.props.chat.msgList.hasNext,t=this.msgOpts.page;return e?t+1:t},t.prototype.onScroll=function(e){var t=this,n=this.props.dispatch,o=e.currentTarget,r=o.scrollTop,a=o.scrollHeight,i=o.clientHeight,l=a-r;if(this.isScrollInBottom=l<i+50,this.isLoadingData)return void(this.isScrollInBottom=!1);if(r<20&&!this.isLoadingData){var s=this.getNextPage();if(s===this.msgOpts.page)return;this.msgOpts.page=s,this.isLoadingData=!0,n((0,j.getHistoryMsg)(this.msgOpts)),setTimeout(function(){l>0&&(o.scrollTop=o.scrollHeight-l,t.isLoadingData=!1)},200),_.default.tdw({action:"click",obj1:"history",obj2:2})}},t.prototype.doRetry=function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,L.default.send({data:M.STRREMARK_QUILLREF_MAP[t]});case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n={};case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return e}(),t.prototype.scrollToBottom=function(){var e=document.getElementsByClassName("msglist");if(e&&0!==e.length){var t=e[0];t.scrollTop=t.scrollHeight-t.clientHeight,this.isScrollInBottom=!0}},t.prototype.render=function(){var e=this,t=parseInt((0,D.getHash)("courseId"),10)||parseInt((0,D.getHash)("id"),10),n=parseInt((0,D.getHash)("type"),10)||1,o=t>0,r=null;return o&&(r=y.default.createElement(x.default,{sendMessage:this.sendBox&&this.sendBox.wrappedInstance.sendMessage,id:t,type:n})),y.default.createElement("div",{className:"chat-window"},r,this.renderMsgList(o),y.default.createElement("div",{className:"chat-item-sendbox"},y.default.createElement(R.default,{ref:function(t){return e.sendBox=t},sendMessage:this.sendMessage,scrollToBottom:this.needScrollToBottom})))},t}(g.Component);F.propType={style:b.default.object,className:b.default.string,dispatch:b.default.func},t.default=(0,E.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(F)},307:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(103),l=o(i),s=n(102),u=o(s),c=n(1),d=o(c),f=n(3),p=o(f),m=n(2),h=o(m),g=n(4),y=o(g),v=n(5),b=o(v),S=n(70),_=o(S),E=n(1190),w=o(E),C=n(20),O=n(51),T=n(6),I=o(T),N=n(42),P=n(43),x=n(41),M=n(19);n(891);var R=function(e){function t(){var n,o,r,a=this;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=o=(0,p.default)(this,e.call.apply(e,[this].concat(s))),o.curPage=0,o.initial=!1,o.onItemClickAction=function(e,t){if((!e||-1===e.target.className.indexOf("i-close"))&&t){var n=o.props,r=n.isAgencyView,a=n.dispatch,i=t.room_id,l=t.room_logo,s=t.members,u=(0,x.diffMembers)(t.members,{roomId:i,roomAvator:l});if(a((0,N.setCurrentRoom)({roomId:i,agencyId:(0,x.getAidFromRoomInfo)(t.spec_business_info),roomState:t.room_state,receiveUid:u.another&&u.another.uid,membersInfo:u,members:s})),r)return void(location.hash="#/agency?roomId="+i);location.hash="#/chat?roomId="+i}},o.onInfiniteLoadAction=(0,u.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.props.dispatch,n=o.getNextPage()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t((0,N.getSessionList)({page:n,num:10}));case 6:if((r=o.props.session.sessionList.list)&&0!==r.length){e.next=9;break}return e.abrupt("return");case 9:o.curPage=n;case 10:case"end":return e.stop()}},e,a)})),r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),t.prototype.componentDidMount=function(){_.default.tdw({action:"exposure",obj1:"session_list"})},t.prototype.getNextPage=function(){return this.props.session.sessionList.hasNext?this.curPage+1:0},t.prototype.getMsgTime=function(e){return e&&0!==e.length?(0,M.formatSessionTime)(1e3*e[0].time):""},t.prototype.getMaskDom=function(e){return e?y.default.createElement("span",{dangerouslySetInnerHTML:{__html:P.MASK_SVG_ICON},key:"mask",className:"icon-mask item-right"}):null},t.prototype.getRedPointDom=function(e,t){return e||t<1?null:y.default.createElement("i",{className:"icon-redpoint item-right"},(0,x.formatRedpoint)(t))},t.prototype.getPartial=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[],r=null;return 0===t.length?this.getEmptyDom():(t.forEach(function(t,a){var i=t.members,l=t.msgs,s=void 0===l?[]:l,u=a,c=t.room_state,d=2===c;if(4!==c){r=(0,x.diffMembers)(i,{roomName:t.room_name,roomAvator:t.room_logo});var f=r,p=f.another,m=t.unread_num,h=e.getMsgTime(s);o.push(y.default.createElement("div",{className:(0,I.default)({"session-item":!0,"session-item--curent":n===t.room_id}),key:u,onClick:function(n){return e.onItemClickAction(n,t)},role:"presentation"},y.default.createElement("a",{onClick:function(n){return e.onDeleteAction(n,u,t)}},y.default.createElement(O.Icon,{type:"close",className:"icon-close"})),y.default.createElement("img",{src:(0,M.decode)(p.pic_url),className:"item-avatar",alt:"头像",width:40,height:40}),y.default.createElement("div",{className:"item-main"},y.default.createElement("div",null,y.default.createElement("h2",{className:(0,I.default)({"item-name":!0,"item-name--short":h.length>6})},p.nick||"-"),y.default.createElement("span",{className:"item-time item-right"},h)),y.default.createElement("div",null,y.default.createElement("p",{className:"item-msg",dangerouslySetInnerHTML:{__html:(0,x.getMsgContent)(s)}}),e.getMaskDom(d),e.getRedPointDom(d,m)))))}}),o)},t.prototype.onDeleteAction=function(e,t,n){(0,this.props.dispatch)((0,N.delSessionItem)(t,n))},t.prototype.getEmptyDom=function(){var e=this.props,t=e.isAgencyView;return e.session.sessionList.isFetching?y.default.createElement("div",{className:"item-loading"}):t?y.default.createElement("div",{className:"agency-list-empty"},"暂无联系人"):y.default.createElement("div",{className:"user-list-empty"},y.default.createElement("span",{className:"user-list-empty-tip"},"暂无消息"))},t.prototype.render=function(){var e=this.props,t=e.session.sessionList,n=e.listHeight,o=e.currentRoom.roomId;return y.default.createElement(w.default,{className:"session-list",containerHeight:n||420,elementHeight:61,infiniteLoadBeginEdgeOffset:300,onInfiniteLoad:this.onInfiniteLoadAction,isInfiniteLoading:t.isFetching,timeScrollStateLastsForAfterUserScrolls:300},this.getPartial(t.list,o))},t}(g.Component);R.propType={style:b.default.object,className:b.default.string,dispatch:b.default.func},R.defaultProps={},t.default=(0,C.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(R)},394:function(e,t,n){(function(t){function n(e){return"number"==typeof e&&o(e)}var o=t.isFinite;e.exports=n}).call(t,n(40))},409:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(t,n){o(this,e),this.heightData=t,this.numberOfChildren=n}return r(e,[{key:"getTotalScrollableHeight",value:function(){}},{key:"getDisplayIndexStart",value:function(e){}},{key:"getDisplayIndexEnd",value:function(e){}},{key:"getTopSpacerHeight",value:function(e){}},{key:"getBottomSpacerHeight",value:function(e){}}]),e}();e.exports=a},439:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(70),h=o(m),g=n(25),y=n(281),v=n(59),b=n(135),S=o(b),_=n(20),E=n(283),w=o(E),C=n(186),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(C);n(257);var T=n(190),I=o(T),N=n(528),P=o(N),x=n(520),M=o(x),R=n(516),k=o(R),L=n(530),H=o(L),A=n(43),j=n(42),B=n(41),D=n(19),U=n(189),F=o(U);n(256),n(892),F.default.push("page_main_start");var q=void 0;q=(0,v.createStore)(H.default,void 0,(0,v.applyMiddleware)(S.default)),window.onhashchange=function(){!!(0,D.getHash)("isConsult")&&location.reload()};var V=function(e){function t(){var n,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=o=(0,u.default)(this,e.call.apply(e,[this].concat(i))),o.clearInterval=1e3,o.clearTimeId=null,o.totalUnreadNum=0,o.onPushMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props.dispatch,n=e.data&&e.data.body||{},r=n.msgs||[],a=n.room_id,i=window.letterUserInfo||{},l=[],s=!1;r.forEach(function(t){var n=t.msg,o=t.ts,r=t.mini_program_info;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){n={msg_body:{msg_rich_text:{}}}}var a=(0,B.formatMsgObj)(n,{message_id:t.message_id,strRemark:n.str_remark,uid:i.uid,ts:o,room_id:t.room_id,from_uin:e.from_uid,bottom:!0,ec:0,from:r||{name:"私信",isFromLetter:!0}}),u=a.type;u===A.MSG_FROM_PEOPLE?s=!0:u===A.MSG_FROM_SYSTEM_STATE&&(a.strRemark="@SYS-"+(0,B.randUUID)()),l.push(a)}),n.msgs=l,t((0,j.sendNewMsg)(l)),t((0,j.updateSessionList)(n)),s&&o.clearMessage(a)},r=n,(0,u.default)(o,r)}return(0,d.default)(t,e),t.prototype.clearMessage=function(e){var t=this.props.currentRoom.roomId;e===""+t&&(0,B.delay)("clearmessage_"+t,function(){(0,B.clearUnreadMessage)(t)},{clear:!0})},t.prototype.componentDidMount=function(){var e=this,t=window,n=t.letterUserInfo;n.uid&&(I.default.init({roomId:n.uid,callback:this.onPushMessage}),(0,B.getUnreadNumber)().then(function(t){e.totalUnreadNum=t}),O.config({platform:window.external&&window.external.CallHummerApi?5:1}))},t.prototype.componentWillUnmount=function(){I.default.disconnect()},t.prototype.render=function(){return p.default.createElement("div",null,this.props.children)},t}(f.Component),W=(0,_.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(V);if(function(){var e=(0,D.getUserInfo)();try{if("ke.qq.com"!==top.location.host)return}catch(e){return}e.uid||(e=top.window.__userInfo),F.default.cfg.url="21882-1-2",window.letterUserInfo=e;var t=!!(0,D.getHash)("isConsult"),n=P.default;e&&e.role_type&&64!==e.role_type?(F.default.cfg.url="21882-1-3",n=k.default):t&&(F.default.cfg.url="21882-1-4",n=M.default,h.default.tdw({module:(0,B.getReportPageString)().replace("-Web",""),action:"click",obj1:"consult"})),(0,g.render)(p.default.createElement("div",{className:w.default.query("env")},p.default.createElement(_.Provider,{store:q},p.default.createElement(y.Router,{history:y.hashHistory},p.default.createElement(y.Route,{path:"/",component:W},p.default.createElement(y.IndexRoute,{component:n}),p.default.createElement(y.Route,{path:"/chat",component:M.default}),p.default.createElement(y.Route,{path:"/list",component:P.default}),p.default.createElement(y.Route,{path:"/agency",component:k.default}))))),window.document.getElementById("react-body"))}(),F.default.push("page_main_end"),setTimeout(function(){F.default.report()},1e3),window.external&&window.external.nativeCallEx){var G=document.createElement("style");G.type="text/css",G.innerHTML="\n    .agency-header {\n      display: none !important;\n    }\n    .agency-container .agency-item {\n      top: 0px !important; \n    }\n  ",document.getElementsByTagName("head").item(0).appendChild(G)}},481:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(3),l=o(i),s=n(2),u=o(s),c=n(4),d=o(c),f=n(5),p=o(f);n(867);var m=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,u.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.text,n=e.color;return d.default.createElement("span",{className:"crm-label",style:{backgroundColor:n}},t)},t}(c.PureComponent);m.propTypes={text:p.default.string,color:p.default.string},m.defaultProps={open:!1},t.default=m},515:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(20);n(877);var h=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props.currentRoom.membersInfo.another;return p.default.createElement("header",{className:"agency-chat-title"},p.default.createElement("span",{className:"agency-chat-title-nick"},e&&e.nick),p.default.createElement("span",{className:"agency-chat-title-uin"},e&&e.uid?" ("+e.uid+")":""))},t}(f.Component);t.default=(0,m.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(h)},516:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(20),y=n(185),v=o(y),b=n(19),S=n(307),_=o(S),E=n(306),w=o(E),C=n(517),O=o(C),T=n(518),I=o(T),N=n(515),P=o(N),x=n(42);n(878);var M=function(e){function t(n){(0,l.default)(this,t);var o=(0,u.default)(this,e.call(this,n));return o.hideEmotion=function(){(0,o.props.dispatch)((0,x.doEmotionToggle)(!1))},(0,b.report)({action:"exposure"}),o}return(0,d.default)(t,e),t.prototype.componentDidMount=function(){var e=this.props.dispatch;if((0,b.getHash)("isConsult")&&e((0,x.setCurrentRoom)({roomId:0,member:(0,b.getHash)("receiverUin")})),sessionStorage.removeItem("crm_specific_send_msg"),window.addEventListener("storage",function(){var t=void 0;try{t=JSON.parse(sessionStorage.getItem("crm_specific_send_msg"))||{}}catch(e){t={}}t.uid&&e((0,x.setCurrentRoom)({roomId:0,member:t.uid}))}),window.top===window&&window.external)return void(0,v.default)("EduChangeWindowProperty",{width:813,height:593});var t=top.document.getElementById("private-msgs-iframe");t&&(t.style.cssText="width:806px;height:586px;")},t.prototype.render=function(){var e=this.props,t=e.currentRoom,n=t.roomId,o=t.member,r=t.receiveUid,a=e.autoReplyConfig,i=o;return p.default.createElement("div",{className:"letter letter--agency agency-container",onClick:this.hideEmotion},p.default.createElement(O.default,{autoReplyConfig:a}),p.default.createElement("div",{className:"agency-item agency-list"},p.default.createElement(_.default,{listHeight:535,isAgencyView:!0})),n||i?p.default.createElement("div",{className:"agency-item agency-chat"},p.default.createElement(P.default,null),p.default.createElement(w.default,{newRoomId:n,receiverUin:i||r,isCall:!!i})):p.default.createElement("div",{className:"agency-item agency-chat agency-chat-bg"}),p.default.createElement("div",{className:"agency-item agency-info"},p.default.createElement(I.default,{receiverUin:i||r})))},t}(f.Component);M.propType={style:h.default.object,className:h.default.string,dispatch:h.default.func},t.default=(0,g.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(M)},517:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(3),l=o(i),s=n(2),u=o(s),c=n(4),d=o(c),f=n(19),p=n(41),m=n(191),h=o(m);n(879);var g=function(e){function t(n){(0,a.default)(this,t);var o=(0,l.default)(this,e.call(this,n));o.closeFrame=function(){sessionStorage.crm_specific_send_msg&&sessionStorage.removeItem("crm_specific_send_msg"),(0,p.closeWindow)()},o.openAutoReplyManage=function(){var e="https://ke.qq.com/agency/index/index.html#tab=letter";window.top===window&&window.external&&window.external.CallHummerApi?(0,p.getClientKey)(function(t){var n=(0,f.getUserInfo)();t&&window.open("/teacher-client/clearCookieProxy.html?clientUin="+n.uid+"&clientKey="+t+"&url="+encodeURIComponent(e))}):(o.closeFrame(),top.window.location.href=e)},o.closePopConfrim=function(){o.setState({showGuide:!1}),h.default.set("showGuide",!1)};var r=void 0;try{r=JSON.parse(h.default.get("showGuide")||"true")}catch(e){r=!0}return o.state={showGuide:r},o}return(0,u.default)(t,e),t.prototype.componentDidMount=function(){var e=this;sessionStorage.removeItem("crm_auto_reply_status"),window.addEventListener("storage",function(){var t=e.props.autoReplyConfig,n=t.enable_auto_reply,o=void 0;try{o=JSON.parse(sessionStorage.getItem("crm_auto_reply_status")||n)}catch(e){o=n}e.setState({autoReplyStatus:o})})},t.prototype.componentWillReceiveProps=function(e){var t=e.autoReplyConfig;this.setState({autoReplyStatus:t.enable_auto_reply})},t.prototype.render=function(){var e=this.state.showGuide,t=this.state.autoReplyStatus;return d.default.createElement("header",{className:"agency-header"},d.default.createElement("h1",{className:"agency-title"},"私信"),d.default.createElement("a",{className:"letter-auto-reply",title:"自动回复设置",onClick:this.openAutoReplyManage},t?"自动回复已开启":"开启自动回复"),d.default.createElement("a",{className:"letter-close js-letter-close",onClick:this.closeFrame},d.default.createElement("i",{className:"icon-font i-close"})),e?d.default.createElement("div",{className:"pop-confirm"},d.default.createElement("p",{className:"pop-confirm-content"},"不在线时，可以设置自动回复给学员"),d.default.createElement("a",{className:"pop-confirm-close",title:"自动回复引导",onClick:this.closePopConfrim},d.default.createElement("i",{className:"icon-font i-close"}))):null)},t}(c.Component);t.default=g},518:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(20),y=n(602);n(880);var v=n(19),b=n(519),S=o(b),_=n(42),E=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.componentWillReceiveProps=function(e){e.receiverUin!==this.props.receiverUin&&this.fetchData(e)},t.prototype.setCourseDefaulState=function(e){return{freeCourseCount:e.free_num||0,rencentCourseCount:(e.live_cnt||0)+(e.record_cnt||0),recentCourseLong:(e.live_ts||0)+(e.record_ts||0),cost:"number"==typeof e.pay_price?(0,v.formatPrice)(e.pay_price):"0.00"}},t.prototype.fetchData=function(e){var t=e||this.props,n=t.dispatch,o=t.receiverUin,r=t.currentRoom.agencyId,a=o,i=r;i||(i=(0,v.getAid)()),n((0,_.doGetStudentCourseInfo)({aid:i,uinList:a})),n((0,_.doGetStudentStatusInfo)({aid:i,uid:a})),n((0,_.doFetchStudentLabelLib)(i))},t.prototype.renderCourseInfo=function(e){var t=this.props.info,n=this.setCourseDefaulState(t.courseInfo);return p.default.createElement("section",{className:"agency-course"},p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"报名免费课"),p.default.createElement("span",{className:"info-data"},e?n.freeCourseCount+"门":"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"90天上课次数"),p.default.createElement("span",{className:"info-data"},e?n.rencentCourseCount+"次":"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"90天上课时长"),p.default.createElement("span",{className:"info-data"},e?p.default.createElement(y.TimeSpanWording,{second:n.recentCourseLong,parser:["小时"]}):"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"付费金额"),p.default.createElement("span",{className:"info-data"},e?n.cost+"元":"-")))},t.prototype.render=function(){var e=this.props.currentRoom,t=e.membersInfo.me&&!!e.membersInfo.me.role_type;return p.default.createElement("div",null,this.renderCourseInfo(t),p.default.createElement(S.default,{receiverUin:this.props.receiverUin,isSalesman:t}))},t}(f.Component);E.propType={style:h.default.object,className:h.default.string,dispatch:h.default.func},E.defaultProps={},t.default=(0,g.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(E)},519:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(20),y=n(51),v=n(42),b=n(96),S=o(b),_=n(43);n(881);var E=n(481),w=o(E),C=n(19),O=2,T=function(e){function t(n){(0,l.default)(this,t);var o=(0,u.default)(this,e.call(this,n));return o.handleChange=function(e){var t=e.target.id,n=o.state;n[t]="remark"===t||"profession"===t?(0,C.decode)(e.target.value):e.target.value,o.setState(n),e.stopPropagation()},o.handleLabelChange=function(e){var t=o.state;t.labelId=e,o.setState(t)},o.handleFollowStatusChange=function(e){var t=o.state;t.followStatus=e,o.setState(t)},o.studentInfoValidator=function(e){var t=!e.phone||/^1\d{10}$/.test(e.phone),n=e.remark.length<=100,o={status:!1};return t?n?o.status=!0:o.errMsg="备注字数超过100，请重新填写":o.errMsg="电话格式错误，请重新填写",o},o.editOperation=function(e){var t=o.props,n=t.dispatch,r=t.receiverUin,a=t.currentRoom.roomId,i=o.state,l=o.studentInfoValidator(i);l.status?(n((0,v.doChangeStudentInfo)({student_uin:r,phone:i.phone,profession:i.profession,remark:i.remark,label_id:i.labelId,general_options:i.followStatus||O},a)),o.toggleEditStatus()):(0,S.default)(l.errMsg,{hideCancel:!0,type:"alert"}),e.preventDefault()},o.setEditState=function(e){var t=o.props.info,n=t.courseInfo,r=void 0===n?{}:n,a=t.statusInfo,i=void 0===a?{}:a;return e.phone=r.phone||"",e.profession=(0,C.decode)(r.profession)||"",e.remark=(0,C.decode)(r.remark)||"",e.labelId=i.label_id,e.followStatus=i.state,e},o.toggleEditStatus=function(){var e=o.state.editorShow,t={editorShow:!e};e||(t=o.setEditState(t)),o.setState(t)},o.state={editorShow:!1},o}return(0,d.default)(t,e),t.prototype.componentWillReceiveProps=function(e){e.receiverUin!==this.props.receiverUin&&this.setState({editorShow:!1})},t.prototype.getLabelDisplay=function(e){return _.FOLLOW_RECORD_TRACE_STATE_OPTIONS.filter(function(t){return t.value===e})[0]||{}},t.prototype.getLabel=function(e){e.map(function(e){return e.display=p.default.createElement("span",{style:{fontSize:"small"}},p.default.createElement(w.default,{color:e.color,text:e.text}),e.name.substring(0,4)),e})},t.prototype.renderMemberInfo=function(){var e=this.props.info,t=e.courseInfo,n=void 0===t?{}:t,o=e.labelInfo,r=void 0===o?{}:o,a=e.statusInfo,i=void 0===a?{}:a,l=this.props.isSalesman,s=i.label_id,u=i.state,c=r[s]||r[0];return p.default.createElement("section",{className:"agency-member-info"},p.default.createElement("div",{className:"info-title"},p.default.createElement("span",{className:"info-data"},"学员资料"),l&&p.default.createElement("i",{className:"icon-font i-edit",onClick:this.toggleEditStatus})),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"电话"),p.default.createElement("span",{className:"info-data"},l?n.phone:"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"职业"),p.default.createElement("span",{className:"info-data"},l?(0,C.decode)(n.profession):"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"标签"),p.default.createElement("span",{className:"info-data"},l?p.default.createElement("span",{style:{fontSize:"small"}},p.default.createElement(w.default,{color:c.color,text:c.text}),c.name.substring(0,4)):"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"跟进状态"),p.default.createElement("span",{className:"info-data"},l?this.getLabelDisplay(u).display:"-")),p.default.createElement("div",{className:"info-list"},p.default.createElement("span",{className:"info-label"},"备注"),p.default.createElement("p",{className:"info-data info-remark"},l?(0,C.decode)(n.remark):"-")))},t.prototype.renderMemberEditor=function(){var e=this.props.info.labelInfo,t=this.state;return this.getLabel(e),p.default.createElement("form",{onChange:this.handleChange},p.default.createElement("div",{className:"info-title"},p.default.createElement("span",{className:"info-data "},"学员资料"),p.default.createElement("input",{type:"submit",className:"info-submit",onClick:this.editOperation,value:"保存"})),p.default.createElement("div",{className:"info-list"},p.default.createElement("label",{htmlFor:"phone",className:"info-label"},"电话"),p.default.createElement("input",{type:"text",id:"phone",value:t.phone})),p.default.createElement("div",{className:"info-list"},p.default.createElement("label",{htmlFor:"profession",className:"info-label"},"职业"),p.default.createElement("input",{type:"text",id:"profession",value:t.profession})),p.default.createElement("div",{className:"info-list"},p.default.createElement("label",{htmlFor:"label",className:"info-label"},"标签"),p.default.createElement(y.Dropdown,{style:{width:"110px",height:"24px"},value:t.labelId||0,options:e?e.slice(1):null,onChange:this.handleLabelChange,showSelectedIcon:!0,placeholder:"标签"})),p.default.createElement("div",{className:"info-list"},p.default.createElement("label",{htmlFor:"followStatus",className:"info-label"},"跟进状态"),p.default.createElement(y.Dropdown,{style:{width:"83px",height:"24px"},value:t.followStatus,options:_.FOLLOW_RECORD_TRACE_STATE_OPTIONS,onChange:this.handleFollowStatusChange,showSelectedIcon:!0,placeholder:"状态"})),p.default.createElement("div",null,p.default.createElement("label",{htmlFor:"remark",className:"info-label info-list"},"备注"),p.default.createElement("textarea",{id:"remark",className:"edit-remark",value:t.remark})))},t.prototype.render=function(){return p.default.createElement("section",{className:"agency-member-editor"},this.state.editorShow?this.renderMemberEditor():this.renderMemberInfo())},t}(f.Component);T.propType={style:h.default.object,className:h.default.string,dispatch:h.default.func},t.default=(0,g.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(T)},520:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(20),y=n(19),v=n(42),b=n(521),S=o(b),_=n(306),E=o(_);n(882);var w=function(e){function t(n){(0,l.default)(this,t);var o=(0,u.default)(this,e.call(this,n));return o.hideEmotion=function(){(0,o.props.dispatch)((0,v.doEmotionToggle)(!1))},(0,y.report)({action:"exposure"}),o}return(0,d.default)(t,e),t.prototype.render=function(){return p.default.createElement("div",{className:"letter letter--chat",onClick:this.hideEmotion},p.default.createElement(S.default,null),p.default.createElement(E.default,null))},t}(f.Component);w.propType={style:h.default.object,className:h.default.string,dispatch:h.default.func},t.default=(0,g.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(w)},521:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(51),h=n(20),g=n(42),y=n(41);n(883);var v=function(e){function t(n){(0,l.default)(this,t);var o=(0,u.default)(this,e.call(this,n));return o.onBackToListAction=o.onBackToListAction.bind(o),o}return(0,d.default)(t,e),t.prototype.onBackToListAction=function(){(0,this.props.dispatch)((0,g.setCurrentRoom)({roomId:0})),location.hash="#/list"},t.prototype.render=function(){var e=this.props.currentRoom.membersInfo,t=e.another,n=void 0===t?{}:t;return p.default.createElement("header",null,p.default.createElement("a",{className:"letter-back",onClick:this.onBackToListAction},p.default.createElement(m.Icon,{type:"v-left"}),"全部私信"),p.default.createElement("h1",{className:"letter-title"},decodeURIComponent(n.nick||"")),p.default.createElement("a",{className:"letter-close",onClick:function(){return(0,y.closeWindow)()}},p.default.createElement(m.Icon,{type:"close"})))},t}(f.Component);t.default=(0,h.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(v)},522:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;var r=n(103),a=o(r),i=n(102),l=o(i),s=n(1),u=o(s),c=n(3),d=o(c),f=n(2),p=o(f),m=n(4),h=o(m),g=n(5),y=o(g),v=t.Image=function(e){function t(){var n,o,r;(0,u.default)(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=o=(0,d.default)(this,e.call.apply(e,[this].concat(i))),o.preview=function(){},r=n,(0,d.default)(o,r)}return(0,p.default)(t,e),t.prototype.componentDidMount=function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.render=function(){var e=this.props,t=e.url,n=e.scrollToBottom,o=t||"//p.qpic.cn/edu_msgpic/0/50C5E3E79B276C92DF6CC52CAEB464F0/0";return o.indexOf("qqke_course_info")>0&&(o+="320"),h.default.createElement("a",{target:"_blank",href:t,title:"查看原图"},h.default.createElement("img",{src:o,alt:"图片",onLoad:n}))},t}(m.PureComponent);v.propTypes={md5:y.default.string,scrollToBottom:y.default.func},v.imgMap={}},523:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(103),l=o(i),s=n(102),u=o(s),c=n(1),d=o(c),f=n(3),p=o(f),m=n(2),h=o(m),g=n(4),y=o(g),v=n(5),b=o(v),S=n(20),_=n(6),E=o(_),w=n(51),C=n(42),O=n(43),T=n(522),I=n(305),N=o(I),P=n(286),x=n(19),M=n(41);n(886);var R=6e3,k=function(e){function t(n){var o=this;(0,d.default)(this,t);var r=(0,p.default)(this,e.call(this,n));return r.doReSend=(0,u.default)(l.default.mark(function e(){var t,n,a,i,s,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.doRetry,a=t.record,i=t.dispatch,r.setState({isLoading:!0}),s=setTimeout(function(){r.setState({isLoading:!1})},R),e.next=5,n();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:u=e.t0,s&&clearTimeout(s),a.ec=u.ec,i((0,C.sendNewMsg)(a)),r.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,o)})),r.state={},r}return(0,h.default)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.needToBottom,n=e.scrollToBottom;t&&n()},t.prototype.shouldComponentUpdate=function(e,t){var n=this.state.isLoading,o=this.props.record.ec;return n!==t.isLoading||o!==e.ec},t.prototype.renderReSend=function(){var e=this.props.record.ec,t=this.state.isLoading;return!e||0===e?null:t?null:y.default.createElement(w.Icon,{type:"alert",title:"消息发送失败，请点击重试",onClick:this.doReSend})},t.prototype.getDefaultMsg=function(){var e=this.state.isLoading,t=this.props,n=t.scrollToBottom,o=t.record,r=t.record.msg,a=t.membersInfo,i=window.letterUserInfo.uid,l=""+o.from_uin,s=l!==i;this.isAnother=s;var u=void 0;u=s?l===""+a.another.uid?a.another:a.oldSalers[l]:a.me;var c=r.map(function(e,t){var o=e.value;switch(e.type){case 1:return y.default.createElement("span",{key:t,dangerouslySetInnerHTML:{__html:(0,M.formatText)(o)}});case 2:return y.default.createElement("img",{className:"emotion",key:t,src:P.EMOTION_URL_MAP[o],"data-idx":o,alt:""});case 3:return y.default.createElement(T.Image,{key:t,url:o,scrollToBottom:n});case 4:return y.default.createElement(N.default,{key:t,data:o,scrollToBottom:n,small:!0});case O.MSG_TYPE_SELF_HTML:return y.default.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:o}});default:return null}});return y.default.createElement("article",{className:(0,E.default)({"msg-item--left":s,"msg-item--right":!s})},y.default.createElement("img",{src:(0,x.decode)(u&&u.pic_url),className:"item-avatar",width:26,height:26,alt:"",title:u&&u.nick}),y.default.createElement("div",{className:"item-content"},c||""),this.renderReSend(),e?y.default.createElement(w.Icon,{type:"loading"}):null)},t.prototype.getSystemMsg=function(){var e=this.props.record.msg;return e&&0!==e.length?y.default.createElement("article",{className:"msg-item--sys"},y.default.createElement("p",{className:"item-sys-content",dangerouslySetInnerHTML:{__html:e&&e[0].value||""}})):null},t.prototype.getMsg=function(){var e=this.props.record.type,t=null;switch(e){case O.MSG_FROM_PEOPLE:t=this.getDefaultMsg();break;case O.MSG_FROM_SYSTEM_STATE:t=this.getSystemMsg()}return t},t.prototype.render=function(){var e=this.getMsg();return y.default.createElement("div",{className:(0,E.default)({"msg-item":!0,"msg-item--me":!this.isAnother})},e)},t}(g.Component);k.propType={style:b.default.object,className:b.default.string,dispatch:b.default.func},k.defaultProps={},t.default=(0,S.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(k)},524:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(3),l=o(i),s=n(2),u=o(s),c=n(4),d=o(c),f=n(5),p=o(f),m=n(19),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m);n(888);var g=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,u.default)(t,e),t.prototype.renderFrom=function(){var e=this.props.from,t=void 0===e?{}:e,n=t.name,o=void 0===n?"":n;return t.isFromLetter?d.default.createElement("span",null,"来自私信"):""!==o?d.default.createElement("span",null,"来自小程序：",o):null},t.prototype.render=function(){var e=this.props.time;return d.default.createElement("div",{className:"msg-item msg-item--timemsg"},h.formatChatTime(e)," ",this.renderFrom())},t}(c.Component);g.propType={style:p.default.object,className:p.default.string,time:p.default.number},g.defaultProps={},t.default=g},528:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(20),y=n(185),v=o(y),b=n(186),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),_=n(529),E=o(_),w=n(307),C=o(w),O=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.componentDidMount=function(){if(window.top===window&&window.external)return void(0,v.default)("EduChangeWindowProperty",{width:373,height:478});S.tdw({action:"exposure"})},t.prototype.render=function(){return p.default.createElement("div",{className:"letter letter--list"},p.default.createElement(E.default,null),p.default.createElement(C.default,null))},t}(f.Component);O.propType={style:h.default.object,className:h.default.string,dispatch:h.default.func},t.default=(0,g.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(O)},529:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=o(r),i=n(1),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(20),h=n(185),g=n(41),y=(0,h.judgeClientVersion)(),v=y.isNewWin,b=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props.session.totalUnreadNum;return p.default.createElement("header",null,p.default.createElement("h1",{className:"letter-title"},"私信(",e<=99?e:"99+",")"),v?null:p.default.createElement("a",{className:"letter-close js-letter-close",onClick:function(){return(0,g.closeWindow)()}},p.default.createElement("i",{className:"icon-font i-close"})))},t}(f.Component);t.default=(0,m.connect)(function(e){return(0,a.default)({},e)},function(e){return{dispatch:e}})(b)},530:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,l=n(8),s=o(l),u=n(13),c=o(u),d=n(59),f=n(113),p=n(199),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),h=n(43),g={session:{sessionList:{list:[],total:0,hasNext:!0,isFetching:!0},sessionMap:{},totalUnreadNum:0},autoReplyConfig:{},currentRoom:{roomId:0,agencyId:0,roomState:1,members:[],membersInfo:{}},chat:{msgList:{list:[]},emotionVisbility:!1},info:{courseInfo:{},statusInfo:{},labelInfo:[{display:"-",name:"-",text:"-",color:"",value:0}]}},y=(0,f.handleActions)((0,c.default)({},h.SET_AUTO_REPLY_CONFIG,function(e,t){return Object.assign({},e,t.payload.data)}),g.autoReplyConfig),v=(0,f.handleActions)((r={},(0,c.default)(r,h.DEL_SESSION_ITEM,function(e,t){var n=t.index,o=void 0===n?-1:n,r=e.sessionList.list;return o<0||o>r.length?e:(r.splice(o,1),Object.assign({},e))}),(0,c.default)(r,h.UPDATE_SESSION_LIST,function(e,t){return Object.assign({},e,t.payload)}),r),g.session),b=(0,f.handleActions)((0,c.default)({},h.SET_CURRENT_ROOM,function(e,t){return Object.assign({},e,t.payload.data)}),g.currentRoom),S=(0,f.handleActions)((a={},(0,c.default)(a,h.SET_CHAT_MSG_LIST,function(e,t){return Object.assign({},e,t.payload)}),(0,c.default)(a,h.EMOTION_TOGGLE,function(e,t){var n=t.payload;return Object.assign({},e,{emotionVisbility:n})}),a),g.chat),_=(0,f.handleActions)((i={},(0,c.default)(i,h.GET_STUDENT_COURSE_INFO,function(e,t){var n=t.payload.data;return Object.assign({},e,{courseInfo:n})}),(0,c.default)(i,h.GET_STUDENT_STATUS_INFO,function(e,t){var n=t.payload.data;return Object.assign({},e,{statusInfo:n})}),(0,c.default)(i,h.FETCH_STUDENT_LABEL_LIB,function(e,t){var n=t.payload.data;return Object.assign({},e,{labelInfo:g.info.labelInfo.concat(n)})}),i),g.info);t.default=(0,d.combineReducers)((0,s.default)({},m,{session:v,currentRoom:b,chat:S,info:_,autoReplyConfig:y}))},602:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSpanWording=void 0;var r=n(1),a=o(r),i=n(7),l=o(i),s=n(3),u=o(s),c=n(2),d=o(c),f=n(4),p=o(f),m=n(5),h=o(m),g=n(6),y=o(g);n(913);var v={"年":31536e3,"月":2592e3,"周":604800,"天":86400,"时":3600,"小时":3600,"刻":900,"刻钟":900,"分":60,"分钟":60,"秒":1},b=t.TimeSpanWording=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.second,r=e.parser,a=Math.max(Number(o),0),i=[];return r.forEach(function(e,t){var n=v[e],o=Math.floor(a/n);(t<r.length-1&&o>1||t===r.length-1)&&(i.push(p.default.createElement("span",{key:e,className:"imuix-time-span-one"},p.default.createElement("em",{className:"imuix-time-span-num"},o),p.default.createElement("em",{className:"imuix-time-span-unit"},e))),a-=n*o)}),p.default.createElement("span",{className:(0,y.default)("imuix-time-span",t),style:n},i)}}]),t}(f.PureComponent);b.propTypes={style:h.default.object,className:h.default.string,second:h.default.number.isRequired,parser:h.default.arrayOf(h.default.oneOf(["年","月","周","天","时","小时","刻","刻钟","分","分钟","秒"]))},b.defaultProps={second:0,parser:["年","月","周","天","时","分","秒"]}},867:function(e,t){},877:function(e,t){},878:function(e,t){},879:function(e,t){},880:function(e,t){},881:function(e,t){},882:function(e,t){},883:function(e,t){},884:function(e,t){},885:function(e,t){},886:function(e,t){},888:function(e,t){},891:function(e,t){},892:function(e,t){},913:function(e,t){}},[1258]);